(this.webpackJsonpgdocwiki=this.webpackJsonpgdocwiki||[]).push([[0],{42:function(e,t,n){e.exports={nav:"Nav_nav__3bvDp",skeleton:"Nav_skeleton__1S4Qu"}},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var c=n(7),a=n(0),i=n.n(a),r=n(41),s=n.n(r),o=n(17),l=n.n(o),d=n(20),u=n(14),j=n(71),p=n(25);var b=n(70),h=n(66),g=n(67),v=n(72),O=n(73),f=n(68),x=n(69),m=n(23),w=n(10),I=n(2),k=n(64);function S(){var e=Object(a.useState)(gapi.auth2.getAuthInstance().isSignedIn.get()),t=Object(u.a)(e,2),n=t[0],i=t[1];Object(p.a)("gSignedInChange",(function(e){i(e.payload.signedIn)}),[]);var r=Object(a.useMemo)((function(){return n?gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile():null}),[n]),s=Object(a.useCallback)((function(){gapi.auth2.getAuthInstance().signIn()}),[]),o=Object(a.useCallback)((function(){gapi.auth2.getAuthInstance().signOut()}),[]);return n?Object(c.jsx)(k.a,{"aria-label":"Sign Out",onClick:o,children:Object(c.jsx)("img",{src:r.getImageUrl(),width:"30"})}):Object(c.jsx)(k.a,{"aria-label":"Sign In",onClick:s,children:Object(c.jsx)(I.ld,{})})}var y=n(19),C=n(45),A=n(65),T=n(32),E=n.n(T),_="0AIURj86T5hpoUk9PVA",M=i.a.createContext({loading:!0});function N(e){var t=e.children,n=Object(a.useState)(!0),i=Object(u.a)(n,2),r=i[0],s=i[1],o=Object(a.useState)(void 0),p=Object(u.a)(o,2),b=p[0],h=p[1],g=Object(a.useCallback)(Object(d.a)(l.a.mark((function e(){var t,n,c,a,i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,gapi.client.drive.files.list({corpora:"drive",driveId:_,includeItemsFromAllDrives:!0,supportsAllDrives:!0,pageSize:500,q:"trashed = false",fields:"nextPageToken, files(name, id, parents, mimeType)"});case 4:a=e.sent,console.log(a),i=null!==(t=null===(n=a.result.files)||void 0===n?void 0:n.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{children:[]})})))&&void 0!==t?t:[],r={},i.forEach((function(e){var t,n;0!==(null!==(t=null===(n=e.parents)||void 0===n?void 0:n.length)&&void 0!==t?t:0)?(void 0===r[e.parents[0]]&&(r[e.parents[0]]=[]),r[e.parents[0]].push(e)):console.log("File does not have parents",e)})),null===i||void 0===i||i.forEach((function(e){var t,n;e.children=null!==(t=r[null!==(n=e.id)&&void 0!==n?n:""])&&void 0!==t?t:[]})),h(null!==(c=r[_])&&void 0!==c?c:[]);case 11:return e.prev=11,s(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,,11,14]])}))),[]),v=Object(a.useMemo)((function(){return{data:b,loading:r}}),[r,b]);return Object(j.a)((function(){g()})),Object(c.jsx)(M.Provider,{value:v,children:t})}var L=n(42),P=n.n(L);function D(){}function U(e,t){if(e)return e.map((function(e){var n=e.children,a=e.isExpanded,i=Object(C.a)(e,["children","isExpanded"]);return Object(c.jsx)(T.TreeNode,Object(y.a)(Object(y.a)({isExpanded:null!==t&&void 0!==t?t:a,onToggle:D},i),{},{children:U(n,t)}),i.id)}))}function F(e){var t;return null===(t=null!==e&&void 0!==e?e:[])||void 0===t?void 0:t.map((function(e){var t={};return e.children.length>0&&(t.children=F(e.children)),Object(y.a)({id:e.id,label:e.name,value:e},t)}))}function q(){var e=Object(a.useContext)(M),t=e.loading,n=e.data,i=Object(a.useMemo)((function(){return F(n)}),[n]),r=Object(w.f)(),s=Object(a.useCallback)((function(e,t){var n=t.value;switch(console.log(n.mimeType),n.mimeType){case"application/vnd.google-apps.document":r.push("/doc/".concat(n.id));break;case"application/vnd.google-apps.folder":r.push("/folder/".concat(n.id))}}),[]);return t?Object(c.jsx)(A.a,{paragraph:!0}):Object(c.jsx)("div",{className:P.a.nav,children:Object(c.jsx)(E.a,{label:"Table of Content",selected:[],onSelect:s,children:U(i,!1)})})}function G(){var e=Object(w.g)().id,t=Object(a.useState)(""),n=Object(u.a)(t,2),i=n[0],r=n[1],s=Object(a.useState)(!0),o=Object(u.a)(s,2),j=o[0],p=o[1];return Object(a.useEffect)((function(){function t(){return(t=Object(d.a)(l.a.mark((function t(){var n,c,a,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.prev=1,t.next=4,gapi.client.drive.files.export({fileId:e,mimeType:"text/html"});case 4:n=t.sent,c=new DOMParser,a=c.parseFromString(n.body,"text/html"),i=a.querySelector("body"),r(i?i.innerHTML:"Error?");case 9:return t.prev=9,p(!1),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[1,,9,12]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),j?Object(c.jsx)(b.a,{description:"Loading document content..."}):Object(c.jsx)("div",{dangerouslySetInnerHTML:{__html:i}})}var H=function(){return function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(a.useCallback)(Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){Object(p.b)({type:"gSignedInChange",payload:{signedIn:e}})},e.prev=1,e.next=4,gapi.client.init({apiKey:"AIzaSyCr53G4OrNdOpjjejsM4wStjW_Uagudq8E",clientId:"814839399439-cm9t983r5374hk28v5lt5ne75i6eit6c.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/documents"});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:gapi.auth2.getAuthInstance().isSignedIn.listen(t),c(!0);case 11:case"end":return e.stop()}}),e,null,[[1,6]])}))),[]);return Object(j.a)((function(){gapi.load("client:auth2",i)})),{gapiLoaded:n}}().gapiLoaded?Object(c.jsx)(m.a,{children:Object(c.jsx)(N,{children:Object(c.jsx)(h.a,{render:function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(g.a,{children:[Object(c.jsx)(v.a,{href:"#",prefix:"Gdoc Wiki",children:"Home"}),Object(c.jsx)(O.a,{children:Object(c.jsx)(S,{})}),Object(c.jsx)(f.a,{expanded:!0,children:Object(c.jsx)(q,{})})]}),Object(c.jsx)(x.a,{children:Object(c.jsx)("div",{className:"bx--grid",children:Object(c.jsx)("div",{className:"bx--row",children:Object(c.jsx)("section",{className:"bx--offset-lg-3 bx--col-lg-13",children:Object(c.jsx)(w.c,{children:Object(c.jsx)(w.a,{path:"/doc/:id",children:Object(c.jsx)(G,{})})})})})})})]})}})})}):Object(c.jsx)(b.a,{description:"Loading Google API"})};n(60),n(61);s.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(H,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.670f488b.chunk.js.map